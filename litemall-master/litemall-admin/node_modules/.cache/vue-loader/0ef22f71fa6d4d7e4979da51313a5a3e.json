{"remainingRequest":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\javaProject\\litemall-master\\litemall-admin\\src\\views\\mall\\aftersale.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\src\\views\\mall\\aftersale.vue","mtime":1703663872000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxpc3RBZnRlcnNhbGUsIHJlY2VwdEFmdGVyc2FsZSwgYmF0Y2hSZWNlcHRBZnRlcnNhbGUsIHJlamVjdEFmdGVyc2FsZSwgYmF0Y2hSZWplY3RBZnRlcnNhbGUsIHJlZnVuZEFmdGVyc2FsZSB9IGZyb20gJ0AvYXBpL2FmdGVyc2FsZScKaW1wb3J0IEJhY2tUb1RvcCBmcm9tICdAL2NvbXBvbmVudHMvQmFja1RvVG9wJwppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvUGFnaW5hdGlvbicgLy8gU2Vjb25kYXJ5IHBhY2thZ2UgYmFzZWQgb24gZWwtcGFnaW5hdGlvbgppbXBvcnQgXyBmcm9tICdsb2Rhc2gnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FmdGVyc2FsZScsCiAgY29tcG9uZW50czogeyBCYWNrVG9Ub3AsIFBhZ2luYXRpb24gfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgdGFiOiAnYWxsJywKICAgICAgbGlzdFF1ZXJ5OiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMjAsCiAgICAgICAgYWZ0ZXJzYWxlU246IHVuZGVmaW5lZCwKICAgICAgICBvcmRlcklkOiB1bmRlZmluZWQsCiAgICAgICAgc3RhdHVzOiAnJywKICAgICAgICBzb3J0OiAnYWRkX3RpbWUnLAogICAgICAgIG9yZGVyOiAnZGVzYycKICAgICAgfSwKICAgICAgdHlwZVRhZzogWwogICAgICAgICcnLAogICAgICAgICdzdWNjZXNzJywKICAgICAgICAnd2FybmluZycKICAgICAgXSwKICAgICAgdHlwZURlc2M6IFsKICAgICAgICAn5pyq5pS26LSn6YCA5qy+JywKICAgICAgICAn5LiN6YCA6LSn6YCA5qy+JywKICAgICAgICAn6YCA6LSn6YCA5qy+JwogICAgICBdLAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sCiAgICAgIGNvbnRlbnREZXRhaWw6ICcnLAogICAgICBjb250ZW50RGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRvd25sb2FkTG9hZGluZzogZmFsc2UsCiAgICAgIGFmdGVyc2FsZURpYWxvZ1Zpc2libGU6ZmFsc2UsCiAgICAgIGFmdGVyc2FsZURldGFpbDp7fQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICBsaXN0QWZ0ZXJzYWxlKHRoaXMubGlzdFF1ZXJ5KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5saXN0CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS5kYXRhLnRvdGFsCiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmxpc3QgPSBbXQogICAgICAgICAgdGhpcy50b3RhbCA9IDAKICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlRmlsdGVyKCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlID0gMQogICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHZhbAogICAgfSwKICAgIGhhbmRsZUNsaWNrKCkgewogICAgICBpZiAodGhpcy50YWIgPT09ICdhbGwnKSB7CiAgICAgICAgdGhpcy5saXN0UXVlcnkuc3RhdHVzID0gJycKICAgICAgfSBlbHNlIGlmICh0aGlzLnRhYiA9PT0gJ3VuY2hlY2snKSB7CiAgICAgICAgdGhpcy5saXN0UXVlcnkuc3RhdHVzID0gJzEnCiAgICAgIH0gZWxzZSBpZiAodGhpcy50YWIgPT09ICd1bnJlZnVuZCcpIHsKICAgICAgICB0aGlzLmxpc3RRdWVyeS5zdGF0dXMgPSAnMicKICAgICAgfQogICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKICAgIGhhbmRsZVJlY2VwdChyb3cpIHsKICAgICAgcmVjZXB0QWZ0ZXJzYWxlKHJvdykKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgbWVzc2FnZTogJ+WuoeaguOmAmui/h+aTjeS9nOaIkOWKnycKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLmdldExpc3QoKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAn5aSx6LSlJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5lcnJtc2cKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVCYXRjaFJlY2VwdCgpIHsKICAgICAgaWYgKHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36YCJ5oup6Iez5bCR5LiA5p2h6K6w5b2VJykKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBjb25zdCBpZHMgPSBbXQogICAgICBfLmZvckVhY2godGhpcy5tdWx0aXBsZVNlbGVjdGlvbiwgZnVuY3Rpb24oaXRlbSkgewogICAgICAgIGlkcy5wdXNoKGl0ZW0uaWQpCiAgICAgIH0pCiAgICAgIGJhdGNoUmVjZXB0QWZ0ZXJzYWxlKHsgaWRzOiBpZHMgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgbWVzc2FnZTogJ+aJuemHj+mAmui/h+aTjeS9nOaIkOWKnycKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLmdldExpc3QoKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAn5aSx6LSlJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5lcnJtc2cKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVSZWplY3Qocm93KSB7CiAgICAgIHJlamVjdEFmdGVyc2FsZShyb3cpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflrqHmoLjmi5Lnu53mk43kvZzmiJDlip8nCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgICB9KQogICAgICAgIC5jYXRjaChyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogJ+Wksei0pScsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEuZXJybXNnCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlQmF0Y2hSZWplY3QoKSB7CiAgICAgIGlmICh0aGlzLm11bHRpcGxlU2VsZWN0aW9uLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeiHs+WwkeS4gOadoeiusOW9lScpCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgY29uc3QgaWRzID0gW10KICAgICAgXy5mb3JFYWNoKHRoaXMubXVsdGlwbGVTZWxlY3Rpb24sIGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICBpZHMucHVzaChpdGVtLmlkKQogICAgICB9KQogICAgICBiYXRjaFJlamVjdEFmdGVyc2FsZSh7IGlkczogaWRzIH0pCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmibnph4/mi5Lnu53mk43kvZzmiJDlip8nCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgICB9KQogICAgICAgIC5jYXRjaChyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogJ+Wksei0pScsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEuZXJybXNnCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlUmVmdW5kKHJvdykgewogICAgICByZWZ1bmRBZnRlcnNhbGUocm93KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgICBtZXNzYWdlOiAn6YCA5qy+5pON5L2c5oiQ5YqfJwogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2gocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICflpLHotKUnLAogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLmVycm1zZwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgfSwKICAgIGhhbmRsZURvd25sb2FkKCkgewogICAgICB0aGlzLmRvd25sb2FkTG9hZGluZyA9IHRydWUKICAgICAgaW1wb3J0KCdAL3ZlbmRvci9FeHBvcnQyRXhjZWwnKS50aGVuKGV4Y2VsID0+IHsKICAgICAgICBjb25zdCB0SGVhZGVyID0gWwogICAgICAgICAgJ+WUruWQjue8luWPtycsCiAgICAgICAgICAn6K6i5Y2VSUQnLAogICAgICAgICAgJ+eUqOaIt0lEJywKICAgICAgICAgICfllK7lkI7nsbvlnosnLAogICAgICAgICAgJ+mAgOasvuWOn+WboCcsCiAgICAgICAgICAn6YCA5qy+5Lu35qC8JywKICAgICAgICAgICfnlLPor7fml7bpl7QnCiAgICAgICAgXQogICAgICAgIGNvbnN0IGZpbHRlclZhbCA9IFsKICAgICAgICAgICdhZnRlcnNhbGVTbicsCiAgICAgICAgICAnb3JkZXJJZCcsCiAgICAgICAgICAndXNlcklkJywKICAgICAgICAgICd0eXBlJywKICAgICAgICAgICdyZWFzb24nLAogICAgICAgICAgJ2Ftb3VudCcsCiAgICAgICAgICAnYWRkVGltZScKICAgICAgICBdCiAgICAgICAgZXhjZWwuZXhwb3J0X2pzb25fdG9fZXhjZWwyKHRIZWFkZXIsIHRoaXMubGlzdCwgZmlsdGVyVmFsLCAn5ZSu5ZCO5L+h5oGvJykKICAgICAgICB0aGlzLmRvd25sb2FkTG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlUmVhZChyb3cpIHsKICAgICAgdGhpcy5hZnRlcnNhbGVEZXRhaWwgPSByb3c7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWZ0ZXJzYWxlRGV0YWlsKTsKICAgICAgdGhpcy5hZnRlcnNhbGVEaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICB9Cn0K"},{"version":3,"sources":["aftersale.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"aftersale.vue","sourceRoot":"src/views/mall","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <!-- 查询和其他操作 -->\n    <div class=\"filter-container\">\n      <el-input v-model=\"listQuery.aftersaleSn\" clearable class=\"filter-item\" style=\"width: 200px;\" :placeholder=\"$t('mall_aftersale.placeholder.filter_aftersale_sn')\" />\n      <el-input v-model=\"listQuery.orderId\" clearable class=\"filter-item\" style=\"width: 200px;\" :placeholder=\"$t('mall_aftersale.placeholder.filter_order_id')\" />\n      <el-button v-permission=\"['GET /admin/aftersale/list']\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">{{ $t('app.button.search') }}</el-button>\n      <el-button :loading=\"downloadLoading\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-download\" @click=\"handleDownload\">{{ $t('app.button.download') }}</el-button>\n    </div>\n\n    <div class=\"operator-container\">\n      <el-button v-permission=\"['GET /admin/aftersale/batch-recept']\" class=\"filter-item\" type=\"success\" icon=\"el-icon-info\" @click=\"handleBatchRecept\">{{ $t('mall_aftersale.button.batch_recept') }}</el-button>\n      <el-button v-permission=\"['GET /admin/aftersale/batch-reject']\" class=\"filter-item\" type=\"danger\" icon=\"el-icon-delete\" @click=\"handleBatchReject\">{{ $t('mall_aftersale.button.batch_reject') }}</el-button>\n    </div>\n\n    <el-tabs v-model=\"tab\" @tab-click=\"handleClick\">\n      <el-tab-pane :label=\"$t('mall_aftersale.section.all')\" name=\"all\" />\n      <el-tab-pane :label=\"$t('mall_aftersale.section.uncheck')\" name=\"uncheck\" />\n      <el-tab-pane :label=\"$t('mall_aftersale.section.unrefund')\" name=\"unrefund\" />\n    </el-tabs>\n\n    <el-table v-loading=\"listLoading\" :data=\"list\" :element-loading-text=\"$t('app.message.list_loading')\" fit highlight-current-row @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\" width=\"55\" />\n\n      <el-table-column align=\"center\" :label=\"$t('mall_aftersale.table.aftersale_sn')\" prop=\"aftersaleSn\" />\n      <el-table-column align=\"center\" :label=\"$t('mall_aftersale.table.order_id')\" prop=\"orderId\" />\n      <el-table-column align=\"center\" :label=\"$t('mall_aftersale.table.user_id')\" prop=\"userId\" />\n      <el-table-column align=\"center\" :label=\"$t('mall_aftersale.table.type')\" prop=\"type\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"typeTag[scope.row.type]\">{{ typeDesc[scope.row.type] }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" :label=\"$t('mall_aftersale.table.reason')\" prop=\"reason\" />\n      <el-table-column align=\"center\" :label=\"$t('mall_aftersale.table.amount')\" prop=\"amount\" />\n      <el-table-column align=\"center\" :label=\"$t('mall_aftersale.table.add_time')\" prop=\"addTime\" />\n\n      <el-table-column align=\"center\" :label=\"$t('mall_aftersale.table.actions')\" min-width=\"120\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button v-permission=\"['POST /admin/aftersale/detail']\" type=\"primary\" size=\"mini\" @click=\"handleRead(scope.row)\">{{ $t('app.button.detail') }}</el-button>\n          <el-button v-if=\"scope.row.status === 1\" v-permission=\"['POST /admin/aftersale/recept']\" type=\"success\" size=\"mini\" @click=\"handleRecept(scope.row)\">{{ $t('mall_aftersale.button.recept') }}</el-button>\n          <el-button v-if=\"scope.row.status === 1\" v-permission=\"['POST /admin/aftersale/reject']\" type=\"danger\" size=\"mini\" @click=\"handleReject(scope.row)\">{{ $t('mall_aftersale.button.reject') }}</el-button>\n          <el-button v-if=\"scope.row.status === 2\" v-permission=\"['POST /admin/aftersale/refund']\" type=\"warning\" size=\"mini\" @click=\"handleRefund(scope.row)\">{{ $t('mall_aftersale.button.refund') }}</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\" :limit.sync=\"listQuery.limit\" @pagination=\"getList\" />\n\n    <el-tooltip placement=\"top\" :content=\"$t('app.tooltip.back_to_top')\">\n      <back-to-top :visibility-height=\"100\" />\n    </el-tooltip>\n    <!-- 详情对话框 -->\n    <el-dialog :visible.sync=\"aftersaleDialogVisible\" :title=\"$t('mall_aftersale.dialog.detail')\" width=\"800\">\n      <section ref=\"print\">\n        <el-form :data=\"aftersaleDetail\" label-position=\"left\">\n          <el-form-item :label=\"$t('mall_aftersale.form.id')\">\n            <el-tag>{{ aftersaleDetail.id }}</el-tag>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.aftersale_sn')\">\n            <el-tag>{{ aftersaleDetail.aftersaleSn }}</el-tag>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.order_id')\">\n            <el-tag>{{ aftersaleDetail.orderId }}</el-tag>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.amount')\">\n            <el-tag>{{ aftersaleDetail.amount }}</el-tag>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.status')\">\n            <el-tag v-if=\"aftersaleDetail.status === 1\">{{ $t('mall_aftersale.value.status_1') }}</el-tag>\n            <el-tag v-if=\"aftersaleDetail.status === 2\">{{ $t('mall_aftersale.value.status_2') }}</el-tag>\n            <el-tag v-if=\"aftersaleDetail.status === 3\">{{ $t('mall_aftersale.value.status_3') }}</el-tag>\n            <el-tag v-if=\"aftersaleDetail.status === 4\">{{ $t('mall_aftersale.value.status_4') }}</el-tag>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.user_id')\">\n            <el-tag>{{ aftersaleDetail.userId }}</el-tag>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.type')\">\n            <el-tag v-if=\"aftersaleDetail.type === 0\">{{ $t('mall_aftersale.value.type_0') }}</el-tag>\n            <el-tag v-if=\"aftersaleDetail.type === 1\">{{ $t('mall_aftersale.value.type_1') }}</el-tag>\n            <el-tag v-if=\"aftersaleDetail.type === 2\">{{ $t('mall_aftersale.value.type_2') }}</el-tag>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.reason')\">\n            <span>{{ aftersaleDetail.reason }}</span>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.add_time')\">\n            <span>{{ aftersaleDetail.addTime }}</span>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.update_time')\">\n            <span>{{ aftersaleDetail.updateTime }}</span>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.handle_time')\">\n            <span>{{ aftersaleDetail.handleTime }}</span>\n          </el-form-item>\n          <el-form-item :label=\"$t('mall_aftersale.form.pictures')\">\n            <el-table :data=\"aftersaleDetail.pictures\" border fit highlight-current-row>\n              <el-table-column align=\"center\" :label=\"$t('mall_aftersale.table.detail_pictures')\">\n                <template slot-scope=\"scope\">\n                  <a :href=\"scope.row\" target=\"_blank\">\n                    <img :src=\"scope.row\" width=\"40\">\n                  </a>\n                </template>\n              </el-table-column>\n            </el-table>\n          </el-form-item>\n        </el-form>\n      </section>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"aftersaleDialogVisible = false\">{{ $t('mall_aftersale.button.cancel') }}</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { listAftersale, receptAftersale, batchReceptAftersale, rejectAftersale, batchRejectAftersale, refundAftersale } from '@/api/aftersale'\nimport BackToTop from '@/components/BackToTop'\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\nimport _ from 'lodash'\n\nexport default {\n  name: 'Aftersale',\n  components: { BackToTop, Pagination },\n  data() {\n    return {\n      list: [],\n      total: 0,\n      listLoading: true,\n      tab: 'all',\n      listQuery: {\n        page: 1,\n        limit: 20,\n        aftersaleSn: undefined,\n        orderId: undefined,\n        status: '',\n        sort: 'add_time',\n        order: 'desc'\n      },\n      typeTag: [\n        '',\n        'success',\n        'warning'\n      ],\n      typeDesc: [\n        '未收货退款',\n        '不退货退款',\n        '退货退款'\n      ],\n      multipleSelection: [],\n      contentDetail: '',\n      contentDialogVisible: false,\n      downloadLoading: false,\n      aftersaleDialogVisible:false,\n      aftersaleDetail:{}\n    }\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    getList() {\n      this.listLoading = true\n      listAftersale(this.listQuery)\n        .then(response => {\n          this.list = response.data.data.list\n          this.total = response.data.data.total\n          this.listLoading = false\n        })\n        .catch(() => {\n          this.list = []\n          this.total = 0\n          this.listLoading = false\n        })\n    },\n    handleFilter() {\n      this.listQuery.page = 1\n      this.getList()\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val\n    },\n    handleClick() {\n      if (this.tab === 'all') {\n        this.listQuery.status = ''\n      } else if (this.tab === 'uncheck') {\n        this.listQuery.status = '1'\n      } else if (this.tab === 'unrefund') {\n        this.listQuery.status = '2'\n      }\n      this.getList()\n    },\n    handleRecept(row) {\n      receptAftersale(row)\n        .then(response => {\n          this.$notify.success({\n            title: '成功',\n            message: '审核通过操作成功'\n          })\n          this.getList()\n        })\n        .catch(response => {\n          this.$notify.error({\n            title: '失败',\n            message: response.data.errmsg\n          })\n        })\n    },\n    handleBatchRecept() {\n      if (this.multipleSelection.length === 0) {\n        this.$message.error('请选择至少一条记录')\n        return\n      }\n      const ids = []\n      _.forEach(this.multipleSelection, function(item) {\n        ids.push(item.id)\n      })\n      batchReceptAftersale({ ids: ids })\n        .then(response => {\n          this.$notify.success({\n            title: '成功',\n            message: '批量通过操作成功'\n          })\n          this.getList()\n        })\n        .catch(response => {\n          this.$notify.error({\n            title: '失败',\n            message: response.data.errmsg\n          })\n        })\n    },\n    handleReject(row) {\n      rejectAftersale(row)\n        .then(response => {\n          this.$notify.success({\n            title: '成功',\n            message: '审核拒绝操作成功'\n          })\n          this.getList()\n        })\n        .catch(response => {\n          this.$notify.error({\n            title: '失败',\n            message: response.data.errmsg\n          })\n        })\n    },\n    handleBatchReject() {\n      if (this.multipleSelection.length === 0) {\n        this.$message.error('请选择至少一条记录')\n        return\n      }\n      const ids = []\n      _.forEach(this.multipleSelection, function(item) {\n        ids.push(item.id)\n      })\n      batchRejectAftersale({ ids: ids })\n        .then(response => {\n          this.$notify.success({\n            title: '成功',\n            message: '批量拒绝操作成功'\n          })\n          this.getList()\n        })\n        .catch(response => {\n          this.$notify.error({\n            title: '失败',\n            message: response.data.errmsg\n          })\n        })\n    },\n    handleRefund(row) {\n      refundAftersale(row)\n        .then(response => {\n          this.$notify.success({\n            title: '成功',\n            message: '退款操作成功'\n          })\n          this.getList()\n        })\n        .catch(response => {\n          this.$notify.error({\n            title: '失败',\n            message: response.data.errmsg\n          })\n        })\n    },\n    handleDownload() {\n      this.downloadLoading = true\n      import('@/vendor/Export2Excel').then(excel => {\n        const tHeader = [\n          '售后编号',\n          '订单ID',\n          '用户ID',\n          '售后类型',\n          '退款原因',\n          '退款价格',\n          '申请时间'\n        ]\n        const filterVal = [\n          'aftersaleSn',\n          'orderId',\n          'userId',\n          'type',\n          'reason',\n          'amount',\n          'addTime'\n        ]\n        excel.export_json_to_excel2(tHeader, this.list, filterVal, '售后信息')\n        this.downloadLoading = false\n      })\n    },\n    handleRead(row) {\n      this.aftersaleDetail = row;\n      console.log(this.aftersaleDetail);\n      this.aftersaleDialogVisible = true\n    },\n  }\n}\n</script>\n"]}]}