{"remainingRequest":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\javaProject\\litemall-master\\litemall-admin\\src\\views\\sys\\notice.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\src\\views\\sys\\notice.vue","mtime":1703663872000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxpc3ROb3RpY2UsIGNyZWF0ZU5vdGljZSwgdXBkYXRlTm90aWNlLCBkZWxldGVOb3RpY2UsIGJhdGNoRGVsZXRlTm90aWNlIH0gZnJvbSAnQC9hcGkvbm90aWNlJwppbXBvcnQgQmFja1RvVG9wIGZyb20gJ0AvY29tcG9uZW50cy9CYWNrVG9Ub3AnCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJ0AvY29tcG9uZW50cy9QYWdpbmF0aW9uJyAvLyBTZWNvbmRhcnkgcGFja2FnZSBiYXNlZCBvbiBlbC1wYWdpbmF0aW9uCmltcG9ydCBfIGZyb20gJ2xvZGFzaCcKaW1wb3J0IEVkaXRvciBmcm9tICdAdGlueW1jZS90aW55bWNlLXZ1ZScKaW1wb3J0IHsgY3JlYXRlU3RvcmFnZSB9IGZyb20gJ0AvYXBpL3N0b3JhZ2UnCmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdOb3RpY2UnLAogIGNvbXBvbmVudHM6IHsgQmFja1RvVG9wLCBQYWdpbmF0aW9uLCBFZGl0b3IgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgbGlzdFF1ZXJ5OiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMjAsCiAgICAgICAgdGl0bGU6IHVuZGVmaW5lZCwKICAgICAgICBjb250ZW50OiB1bmRlZmluZWQsCiAgICAgICAgc29ydDogJ2FkZF90aW1lJywKICAgICAgICBvcmRlcjogJ2Rlc2MnCiAgICAgIH0sCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwKICAgICAgY29udGVudERldGFpbDogJycsCiAgICAgIGNvbnRlbnREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGF0YUZvcm06IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIHRpdGxlOiB1bmRlZmluZWQsCiAgICAgICAgY29udGVudDogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nU3RhdHVzOiAnJywKICAgICAgdGV4dE1hcDogewogICAgICAgIHVwZGF0ZTogJ+e8lui+kScsCiAgICAgICAgY3JlYXRlOiAn5Yib5bu6JwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfpgJrnn6XmoIfpopjkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfSwKICAgICAgZWRpdG9ySW5pdDogewogICAgICAgIGxhbmd1YWdlOiAnemhfQ04nLAogICAgICAgIGhlaWdodDogMjAwLAogICAgICAgIGNvbnZlcnRfdXJsczogZmFsc2UsCiAgICAgICAgcGx1Z2luczogWydhZHZsaXN0IGFuY2hvciBhdXRvbGluayBhdXRvc2F2ZSBjb2RlIGNvZGVzYW1wbGUgY29sb3JwaWNrZXIgY29sb3JwaWNrZXIgY29udGV4dG1lbnUgZGlyZWN0aW9uYWxpdHkgZW1vdGljb25zIGZ1bGxzY3JlZW4gaHIgaW1hZ2UgaW1hZ2V0b29scyBpbXBvcnRjc3MgaW5zZXJ0ZGF0ZXRpbWUgbGluayBsaXN0cyBtZWRpYSBub25icmVha2luZyBub25lZGl0YWJsZSBwYWdlYnJlYWsgcGFzdGUgcHJldmlldyBwcmludCBzYXZlIHNlYXJjaHJlcGxhY2Ugc3BlbGxjaGVja2VyIHRhYmZvY3VzIHRhYmxlIHRlbXBsYXRlIHRleHRjb2xvciB0ZXh0cGF0dGVybiB2aXN1YWxibG9ja3MgdmlzdWFsY2hhcnMgd29yZGNvdW50J10sCiAgICAgICAgdG9vbGJhcjogWydzZWFyY2hyZXBsYWNlIGJvbGQgaXRhbGljIHVuZGVybGluZSBzdHJpa2V0aHJvdWdoIGFsaWdubGVmdCBhbGlnbmNlbnRlciBhbGlnbnJpZ2h0IG91dGRlbnQgaW5kZW50ICBibG9ja3F1b3RlIHVuZG8gcmVkbyByZW1vdmVmb3JtYXQgc3Vic2NyaXB0IHN1cGVyc2NyaXB0IGNvZGUgY29kZXNhbXBsZScsICdociBidWxsaXN0IG51bWxpc3QgbGluayBpbWFnZSBjaGFybWFwIHByZXZpZXcgYW5jaG9yIHBhZ2VicmVhayBpbnNlcnRkYXRldGltZSBtZWRpYSB0YWJsZSBlbW90aWNvbnMgZm9yZWNvbG9yIGJhY2tjb2xvciBmdWxsc2NyZWVuJ10sCiAgICAgICAgaW1hZ2VzX3VwbG9hZF9oYW5kbGVyOiBmdW5jdGlvbihibG9iSW5mbywgc3VjY2VzcywgZmFpbHVyZSkgewogICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgYmxvYkluZm8uYmxvYigpKQogICAgICAgICAgY3JlYXRlU3RvcmFnZShmb3JtRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgICAgICBzdWNjZXNzKHJlcy5kYXRhLmRhdGEudXJsKQogICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICBmYWlsdXJlKCfkuIrkvKDlpLHotKXvvIzor7fph43mlrDkuIrkvKAnKQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRvd25sb2FkTG9hZGluZzogZmFsc2UKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBoZWFkZXJzKCkgewogICAgICByZXR1cm4gewogICAgICAgICdYLUxpdGVtYWxsLUFkbWluLVRva2VuJzogZ2V0VG9rZW4oKQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlCiAgICAgIGxpc3ROb3RpY2UodGhpcy5saXN0UXVlcnkpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5kYXRhLmxpc3QKICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLmRhdGEudG90YWwKICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMubGlzdCA9IFtdCiAgICAgICAgICB0aGlzLnRvdGFsID0gMAogICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVGaWx0ZXIoKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2UgPSAxCiAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgcmVzZXRGb3JtKCkgewogICAgICB0aGlzLmRhdGFGb3JtID0gewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgdGl0bGU6IHVuZGVmaW5lZCwKICAgICAgICBjb250ZW50OiB1bmRlZmluZWQKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUNyZWF0ZSgpIHsKICAgICAgdGhpcy5yZXNldEZvcm0oKQogICAgICB0aGlzLmRpYWxvZ1N0YXR1cyA9ICdjcmVhdGUnCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLmNsZWFyVmFsaWRhdGUoKQogICAgICB9KQogICAgfSwKICAgIGNyZWF0ZURhdGEoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ2RhdGFGb3JtJ10udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgY3JlYXRlTm90aWNlKHRoaXMuZGF0YUZvcm0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLmxpc3QudW5zaGlmdChyZXNwb25zZS5kYXRhLmRhdGEpCiAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIm+W7uuaIkOWKnycKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2gocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+Wksei0pScsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLmVycm1zZwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVVwZGF0ZShyb3cpIHsKICAgICAgdGhpcy5kYXRhRm9ybSA9IE9iamVjdC5hc3NpZ24oe30sIHJvdykKICAgICAgdGhpcy5kaWFsb2dTdGF0dXMgPSAndXBkYXRlJwogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmc1snZGF0YUZvcm0nXS5jbGVhclZhbGlkYXRlKCkKICAgICAgfSkKICAgIH0sCiAgICB1cGRhdGVEYXRhKCkgewogICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHVwZGF0ZU5vdGljZSh0aGlzLmRhdGFGb3JtKQogICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIHRoaXMubGlzdCkgewogICAgICAgICAgICAgICAgaWYgKHYuaWQgPT09IHRoaXMuZGF0YUZvcm0uaWQpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmxpc3QuaW5kZXhPZih2KQogICAgICAgICAgICAgICAgICB0aGlzLmxpc3Quc3BsaWNlKGluZGV4LCAxLCB0aGlzLmRhdGFGb3JtKQogICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5pu05paw5bm/5ZGK5oiQ5YqfJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAn5aSx6LSlJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEuZXJybXNnCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlRGVsZXRlKHJvdykgewogICAgICBkZWxldGVOb3RpY2Uocm93KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk6YCa55+l5oiQ5YqfJwogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2gocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICflpLHotKUnLAogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLmVycm1zZwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgfSwKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHZhbAogICAgfSwKICAgIHNob3dDb250ZW50KGNvbnRlbnQpIHsKICAgICAgdGhpcy5jb250ZW50RGV0YWlsID0gY29udGVudAogICAgICB0aGlzLmNvbnRlbnREaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIGhhbmRsZUJhdGNoRGVsZXRlKCkgewogICAgICBpZiAodGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fpgInmi6noh7PlsJHkuIDmnaHorrDlvZUnKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGNvbnN0IGlkcyA9IFtdCiAgICAgIF8uZm9yRWFjaCh0aGlzLm11bHRpcGxlU2VsZWN0aW9uLCBmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgaWRzLnB1c2goaXRlbS5pZCkKICAgICAgfSkKICAgICAgYmF0Y2hEZWxldGVOb3RpY2UoeyBpZHM6IGlkcyB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgICBtZXNzYWdlOiAn5om56YeP5Yig6Zmk6YCa55+l5oiQ5YqfJwogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2gocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICflpLHotKUnLAogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLmVycm1zZwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgfSwKICAgIGhhbmRsZURvd25sb2FkKCkgewogICAgICB0aGlzLmRvd25sb2FkTG9hZGluZyA9IHRydWUKICAgICAgaW1wb3J0KCdAL3ZlbmRvci9FeHBvcnQyRXhjZWwnKS50aGVuKGV4Y2VsID0+IHsKICAgICAgICBjb25zdCB0SGVhZGVyID0gWwogICAgICAgICAgJ+mAmuefpUlEJywKICAgICAgICAgICfpgJrnn6XmoIfpopgnLAogICAgICAgICAgJ+euoeeQhuWRmElEJywKICAgICAgICAgICfmt7vliqDml7bpl7QnLAogICAgICAgICAgJ+abtOaWsOaXtumXtCcKICAgICAgICBdCiAgICAgICAgY29uc3QgZmlsdGVyVmFsID0gWwogICAgICAgICAgJ2lkJywKICAgICAgICAgICd0aXRsZScsCiAgICAgICAgICAnY29udGVudCcsCiAgICAgICAgICAnYWRtaW5JZCcsCiAgICAgICAgICAnYWRkVGltZScsCiAgICAgICAgICAndXBkYXRlVGltZScKICAgICAgICBdCiAgICAgICAgZXhjZWwuZXhwb3J0X2pzb25fdG9fZXhjZWwyKHRIZWFkZXIsIHRoaXMubGlzdCwgZmlsdGVyVmFsLCAn6YCa55+lJykKICAgICAgICB0aGlzLmRvd25sb2FkTG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["notice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"notice.vue","sourceRoot":"src/views/sys","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <!-- 查询和其他操作 -->\n    <div class=\"filter-container\">\n      <el-input v-model=\"listQuery.title\" clearable class=\"filter-item\" style=\"width: 200px;\" :placeholder=\"$t('sys_notice.placeholder.filter_title')\" />\n      <el-input v-model=\"listQuery.content\" clearable class=\"filter-item\" style=\"width: 200px;\" :placeholder=\"$t('sys_notice.placeholder.filter_content')\" />\n      <el-button v-permission=\"['GET /admin/notice/list']\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">{{ $t('app.button.search') }}</el-button>\n      <el-button :loading=\"downloadLoading\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-download\" @click=\"handleDownload\">{{ $t('app.button.download') }}</el-button>\n    </div>\n\n    <div class=\"operator-container\">\n      <el-button v-permission=\"['POST /admin/notice/create']\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-edit\" @click=\"handleCreate\">{{ $t('app.button.create') }}</el-button>\n      <el-button v-permission=\"['GET /admin/notice/batch-delete']\" class=\"filter-item\" type=\"danger\" icon=\"el-icon-delete\" @click=\"handleBatchDelete\">{{ $t('app.button.batch_delete') }}</el-button>\n    </div>\n\n    <!-- 查询结果 -->\n    <el-table v-loading=\"listLoading\" :data=\"list\" :element-loading-text=\"$t('app.message.list_loading')\" border fit highlight-current-row @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\" width=\"55\" />\n\n      <el-table-column align=\"center\" :label=\"$t('sys_notice.table.title')\" prop=\"title\" />\n\n      <el-table-column align=\"center\" :label=\"$t('sys_notice.table.content')\" prop=\"content\">\n        <template slot-scope=\"scope\">\n          <el-dialog :visible.sync=\"contentDialogVisible\" :title=\"$t('sys_notice.dialog.content_detail')\">\n            <div v-html=\"contentDetail\" />\n          </el-dialog>\n          <el-button type=\"primary\" size=\"mini\" @click=\"showContent(scope.row.content)\">{{ $t('app.button.view') }}</el-button>\n        </template>\n      </el-table-column>\n\n      <el-table-column align=\"center\" :label=\"$t('sys_notice.table.add_time')\" prop=\"addTime\" />\n\n      <el-table-column align=\"center\" :label=\"$t('sys_notice.table.admin_id')\" prop=\"adminId\" />\n\n      <el-table-column align=\"center\" :label=\"$t('sys_notice.table.actions')\" min-width=\"100\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button v-permission=\"['POST /admin/notice/update']\" type=\"primary\" size=\"mini\" @click=\"handleUpdate(scope.row)\">{{ $t('app.button.edit') }}</el-button>\n          <el-button v-permission=\"['POST /admin/notice/delete']\" type=\"danger\" size=\"mini\" @click=\"handleDelete(scope.row)\">{{ $t('app.button.delete') }}</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\" :limit.sync=\"listQuery.limit\" @pagination=\"getList\" />\n\n    <!-- 添加或修改对话框 -->\n    <el-dialog :title=\"textMap[dialogStatus]\" :visible.sync=\"dialogFormVisible\">\n      <el-form ref=\"dataForm\" :rules=\"rules\" :model=\"dataForm\" status-icon label-position=\"left\" label-width=\"100px\">\n        <el-form-item :label=\"$t('sys_notice.form.title')\" prop=\"title\">\n          <el-input v-model=\"dataForm.title\" />\n        </el-form-item>\n        <el-form-item :label=\"$t('sys_notice.form.content')\" prop=\"content\">\n          <editor v-model=\"dataForm.content\" :init=\"editorInit\" />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">{{ $t('app.button.cancel') }}</el-button>\n        <el-button v-if=\"dialogStatus=='create'\" type=\"primary\" @click=\"createData\">{{ $t('app.button.confirm') }}</el-button>\n        <el-button v-else type=\"primary\" @click=\"updateData\">{{ $t('app.button.confirm') }}</el-button>\n      </div>\n    </el-dialog>\n\n    <el-tooltip placement=\"top\" :content=\"$t('app.tooltip.back_to_top')\">\n      <back-to-top :visibility-height=\"100\" />\n    </el-tooltip>\n\n  </div>\n</template>\n\n<script>\nimport { listNotice, createNotice, updateNotice, deleteNotice, batchDeleteNotice } from '@/api/notice'\nimport BackToTop from '@/components/BackToTop'\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\nimport _ from 'lodash'\nimport Editor from '@tinymce/tinymce-vue'\nimport { createStorage } from '@/api/storage'\nimport { getToken } from '@/utils/auth'\n\nexport default {\n  name: 'Notice',\n  components: { BackToTop, Pagination, Editor },\n  data() {\n    return {\n      list: [],\n      total: 0,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        limit: 20,\n        title: undefined,\n        content: undefined,\n        sort: 'add_time',\n        order: 'desc'\n      },\n      multipleSelection: [],\n      contentDetail: '',\n      contentDialogVisible: false,\n      dataForm: {\n        id: undefined,\n        title: undefined,\n        content: undefined\n      },\n      dialogFormVisible: false,\n      dialogStatus: '',\n      textMap: {\n        update: '编辑',\n        create: '创建'\n      },\n      rules: {\n        name: [\n          { required: true, message: '通知标题不能为空', trigger: 'blur' }\n        ]\n      },\n      editorInit: {\n        language: 'zh_CN',\n        height: 200,\n        convert_urls: false,\n        plugins: ['advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount'],\n        toolbar: ['searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample', 'hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen'],\n        images_upload_handler: function(blobInfo, success, failure) {\n          const formData = new FormData()\n          formData.append('file', blobInfo.blob())\n          createStorage(formData).then(res => {\n            success(res.data.data.url)\n          }).catch(() => {\n            failure('上传失败，请重新上传')\n          })\n        }\n      },\n      downloadLoading: false\n    }\n  },\n  computed: {\n    headers() {\n      return {\n        'X-Litemall-Admin-Token': getToken()\n      }\n    }\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    getList() {\n      this.listLoading = true\n      listNotice(this.listQuery)\n        .then(response => {\n          this.list = response.data.data.list\n          this.total = response.data.data.total\n          this.listLoading = false\n        })\n        .catch(() => {\n          this.list = []\n          this.total = 0\n          this.listLoading = false\n        })\n    },\n    handleFilter() {\n      this.listQuery.page = 1\n      this.getList()\n    },\n    resetForm() {\n      this.dataForm = {\n        id: undefined,\n        title: undefined,\n        content: undefined\n      }\n    },\n    handleCreate() {\n      this.resetForm()\n      this.dialogStatus = 'create'\n      this.dialogFormVisible = true\n      this.$nextTick(() => {\n        this.$refs['dataForm'].clearValidate()\n      })\n    },\n    createData() {\n      this.$refs['dataForm'].validate(valid => {\n        if (valid) {\n          createNotice(this.dataForm)\n            .then(response => {\n              this.list.unshift(response.data.data)\n              this.dialogFormVisible = false\n              this.$notify.success({\n                title: '成功',\n                message: '创建成功'\n              })\n            })\n            .catch(response => {\n              this.$notify.error({\n                title: '失败',\n                message: response.data.errmsg\n              })\n            })\n        }\n      })\n    },\n    handleUpdate(row) {\n      this.dataForm = Object.assign({}, row)\n      this.dialogStatus = 'update'\n      this.dialogFormVisible = true\n      this.$nextTick(() => {\n        this.$refs['dataForm'].clearValidate()\n      })\n    },\n    updateData() {\n      this.$refs['dataForm'].validate(valid => {\n        if (valid) {\n          updateNotice(this.dataForm)\n            .then(() => {\n              for (const v of this.list) {\n                if (v.id === this.dataForm.id) {\n                  const index = this.list.indexOf(v)\n                  this.list.splice(index, 1, this.dataForm)\n                  break\n                }\n              }\n              this.dialogFormVisible = false\n              this.$notify.success({\n                title: '成功',\n                message: '更新广告成功'\n              })\n            })\n            .catch(response => {\n              this.$notify.error({\n                title: '失败',\n                message: response.data.errmsg\n              })\n            })\n        }\n      })\n    },\n    handleDelete(row) {\n      deleteNotice(row)\n        .then(response => {\n          this.$notify.success({\n            title: '成功',\n            message: '删除通知成功'\n          })\n          this.getList()\n        })\n        .catch(response => {\n          this.$notify.error({\n            title: '失败',\n            message: response.data.errmsg\n          })\n        })\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val\n    },\n    showContent(content) {\n      this.contentDetail = content\n      this.contentDialogVisible = true\n    },\n    handleBatchDelete() {\n      if (this.multipleSelection.length === 0) {\n        this.$message.error('请选择至少一条记录')\n        return\n      }\n      const ids = []\n      _.forEach(this.multipleSelection, function(item) {\n        ids.push(item.id)\n      })\n      batchDeleteNotice({ ids: ids })\n        .then(response => {\n          this.$notify.success({\n            title: '成功',\n            message: '批量删除通知成功'\n          })\n          this.getList()\n        })\n        .catch(response => {\n          this.$notify.error({\n            title: '失败',\n            message: response.data.errmsg\n          })\n        })\n    },\n    handleDownload() {\n      this.downloadLoading = true\n      import('@/vendor/Export2Excel').then(excel => {\n        const tHeader = [\n          '通知ID',\n          '通知标题',\n          '管理员ID',\n          '添加时间',\n          '更新时间'\n        ]\n        const filterVal = [\n          'id',\n          'title',\n          'content',\n          'adminId',\n          'addTime',\n          'updateTime'\n        ]\n        excel.export_json_to_excel2(tHeader, this.list, filterVal, '通知')\n        this.downloadLoading = false\n      })\n    }\n  }\n}\n</script>\n"]}]}