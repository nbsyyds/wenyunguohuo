{"remainingRequest":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\javaProject\\litemall-master\\litemall-admin\\src\\store\\modules\\permission.js","dependencies":[{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\src\\store\\modules\\permission.js","mtime":1703663872000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\babel.config.js","mtime":1703663870000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\javaProject\\litemall-master\\litemall-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9qYXZhUHJvamVjdC9saXRlbWFsbC1tYXN0ZXIvbGl0ZW1hbGwtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfb2JqZWN0U3ByZWFkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRDovamF2YVByb2plY3QvbGl0ZW1hbGwtbWFzdGVyL2xpdGVtYWxsLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDIuanMiKSk7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKdmFyIF9yb3V0ZXIgPSByZXF1aXJlKCJAL3JvdXRlciIpOwovKioKICog6YCa6L+HbWV0YS5wZXJtc+WIpOaWreaYr+WQpuS4juW9k+WJjeeUqOaIt+adg+mZkOWMuemFjQogKiBAcGFyYW0gcGVybXMKICogQHBhcmFtIHJvdXRlCiAqLwpmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHBlcm1zLCByb3V0ZSkgewogIGlmIChyb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEucGVybXMpIHsKICAgIHJldHVybiBwZXJtcy5zb21lKGZ1bmN0aW9uIChwZXJtKSB7CiAgICAgIHJldHVybiByb3V0ZS5tZXRhLnBlcm1zLmluY2x1ZGVzKHBlcm0pOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKLyoqCiAqIOmAkuW9kui/h+a7pOW8guatpei3r+eUseihqO+8jOi/lOWbnuespuWQiOeUqOaIt+inkuiJsuadg+mZkOeahOi3r+eUseihqAogKiBAcGFyYW0gcm91dGVzIGFzeW5jUm91dGVzCiAqIEBwYXJhbSBwZXJtcwogKi8KZnVuY3Rpb24gZmlsdGVyQXN5bmNSb3V0ZXMocm91dGVzLCBwZXJtcykgewogIHZhciByZXMgPSBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgIHZhciB0bXAgPSAoMCwgX29iamVjdFNwcmVhZDIuZGVmYXVsdCkoe30sIHJvdXRlKTsKICAgIGlmICh0bXAuY2hpbGRyZW4pIHsKICAgICAgdG1wLmNoaWxkcmVuID0gZmlsdGVyQXN5bmNSb3V0ZXModG1wLmNoaWxkcmVuLCBwZXJtcyk7CiAgICAgIGlmICh0bXAuY2hpbGRyZW4gJiYgdG1wLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICByZXMucHVzaCh0bXApOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoaGFzUGVybWlzc2lvbihwZXJtcywgdG1wKSkgewogICAgICAgIHJlcy5wdXNoKHRtcCk7CiAgICAgIH0KICAgIH0KICB9KTsKICByZXR1cm4gcmVzOwp9CnZhciBwZXJtaXNzaW9uID0gewogIHN0YXRlOiB7CiAgICByb3V0ZXM6IF9yb3V0ZXIuY29uc3RhbnRSb3V0ZXMsCiAgICBhZGRSb3V0ZXM6IFtdCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9ST1VURVM6IGZ1bmN0aW9uIFNFVF9ST1VURVMoc3RhdGUsIHJvdXRlcykgewogICAgICBzdGF0ZS5hZGRSb3V0ZXMgPSByb3V0ZXM7CiAgICAgIHN0YXRlLnJvdXRlcyA9IF9yb3V0ZXIuY29uc3RhbnRSb3V0ZXMuY29uY2F0KHJvdXRlcyk7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBHZW5lcmF0ZVJvdXRlczogZnVuY3Rpb24gR2VuZXJhdGVSb3V0ZXMoX3JlZiwgZGF0YSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHZhciBwZXJtcyA9IGRhdGEucGVybXM7CiAgICAgICAgdmFyIGFjY2Vzc2VkUm91dGVzOwogICAgICAgIGlmIChwZXJtcy5pbmNsdWRlcygnKicpKSB7CiAgICAgICAgICBhY2Nlc3NlZFJvdXRlcyA9IF9yb3V0ZXIuYXN5bmNSb3V0ZXM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFjY2Vzc2VkUm91dGVzID0gZmlsdGVyQXN5bmNSb3V0ZXMoX3JvdXRlci5hc3luY1JvdXRlcywgcGVybXMpOwogICAgICAgIH0KICAgICAgICBjb21taXQoJ1NFVF9ST1VURVMnLCBhY2Nlc3NlZFJvdXRlcyk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KTsKICAgIH0KICB9Cn07CnZhciBfZGVmYXVsdCA9IGV4cG9ydHMuZGVmYXVsdCA9IHBlcm1pc3Npb247"},{"version":3,"names":["_router","require","hasPermission","perms","route","meta","some","perm","includes","filterAsyncRoutes","routes","res","forEach","tmp","_objectSpread2","default","children","length","push","permission","state","constantRoutes","addRoutes","mutations","SET_ROUTES","concat","actions","GenerateRoutes","_ref","data","commit","Promise","resolve","accessedRoutes","asyncRoutes","_default","exports"],"sources":["D:/javaProject/litemall-master/litemall-admin/src/store/modules/permission.js"],"sourcesContent":["import { asyncRoutes, constantRoutes } from '@/router'\n\n/**\n * 通过meta.perms判断是否与当前用户权限匹配\n * @param perms\n * @param route\n */\nfunction hasPermission(perms, route) {\n  if (route.meta && route.meta.perms) {\n    return perms.some(perm => route.meta.perms.includes(perm))\n  } else {\n    return true\n  }\n}\n\n/**\n * 递归过滤异步路由表，返回符合用户角色权限的路由表\n * @param routes asyncRoutes\n * @param perms\n */\nfunction filterAsyncRoutes(routes, perms) {\n  const res = []\n\n  routes.forEach(route => {\n    const tmp = { ...route }\n    if (tmp.children) {\n      tmp.children = filterAsyncRoutes(tmp.children, perms)\n      if (tmp.children && tmp.children.length > 0) {\n        res.push(tmp)\n      }\n    } else {\n      if (hasPermission(perms, tmp)) {\n        res.push(tmp)\n      }\n    }\n  })\n\n  return res\n}\n\nconst permission = {\n  state: {\n    routes: constantRoutes,\n    addRoutes: []\n  },\n  mutations: {\n    SET_ROUTES: (state, routes) => {\n      state.addRoutes = routes\n      state.routes = constantRoutes.concat(routes)\n    }\n  },\n  actions: {\n    GenerateRoutes({ commit }, data) {\n      return new Promise(resolve => {\n        const { perms } = data\n        let accessedRoutes\n        if (perms.includes('*')) {\n          accessedRoutes = asyncRoutes\n        } else {\n          accessedRoutes = filterAsyncRoutes(asyncRoutes, perms)\n        }\n        commit('SET_ROUTES', accessedRoutes)\n        resolve()\n      })\n    }\n  }\n}\n\nexport default permission\n"],"mappings":";;;;;;;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA,SAASC,aAAaA,CAACC,KAAK,EAAEC,KAAK,EAAE;EACnC,IAAIA,KAAK,CAACC,IAAI,IAAID,KAAK,CAACC,IAAI,CAACF,KAAK,EAAE;IAClC,OAAOA,KAAK,CAACG,IAAI,CAAC,UAAAC,IAAI;MAAA,OAAIH,KAAK,CAACC,IAAI,CAACF,KAAK,CAACK,QAAQ,CAACD,IAAI,CAAC;IAAA,EAAC;EAC5D,CAAC,MAAM;IACL,OAAO,IAAI;EACb;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASE,iBAAiBA,CAACC,MAAM,EAAEP,KAAK,EAAE;EACxC,IAAMQ,GAAG,GAAG,EAAE;EAEdD,MAAM,CAACE,OAAO,CAAC,UAAAR,KAAK,EAAI;IACtB,IAAMS,GAAG,OAAAC,cAAA,CAAAC,OAAA,MAAQX,KAAK,CAAE;IACxB,IAAIS,GAAG,CAACG,QAAQ,EAAE;MAChBH,GAAG,CAACG,QAAQ,GAAGP,iBAAiB,CAACI,GAAG,CAACG,QAAQ,EAAEb,KAAK,CAAC;MACrD,IAAIU,GAAG,CAACG,QAAQ,IAAIH,GAAG,CAACG,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;QAC3CN,GAAG,CAACO,IAAI,CAACL,GAAG,CAAC;MACf;IACF,CAAC,MAAM;MACL,IAAIX,aAAa,CAACC,KAAK,EAAEU,GAAG,CAAC,EAAE;QAC7BF,GAAG,CAACO,IAAI,CAACL,GAAG,CAAC;MACf;IACF;EACF,CAAC,CAAC;EAEF,OAAOF,GAAG;AACZ;AAEA,IAAMQ,UAAU,GAAG;EACjBC,KAAK,EAAE;IACLV,MAAM,EAAEW,sBAAc;IACtBC,SAAS,EAAE;EACb,CAAC;EACDC,SAAS,EAAE;IACTC,UAAU,EAAE,SAAZA,UAAUA,CAAGJ,KAAK,EAAEV,MAAM,EAAK;MAC7BU,KAAK,CAACE,SAAS,GAAGZ,MAAM;MACxBU,KAAK,CAACV,MAAM,GAAGW,sBAAc,CAACI,MAAM,CAACf,MAAM,CAAC;IAC9C;EACF,CAAC;EACDgB,OAAO,EAAE;IACPC,cAAc,WAAdA,cAAcA,CAAAC,IAAA,EAAaC,IAAI,EAAE;MAAA,IAAhBC,MAAM,GAAAF,IAAA,CAANE,MAAM;MACrB,OAAO,IAAIC,OAAO,CAAC,UAAAC,OAAO,EAAI;QAC5B,IAAQ7B,KAAK,GAAK0B,IAAI,CAAd1B,KAAK;QACb,IAAI8B,cAAc;QAClB,IAAI9B,KAAK,CAACK,QAAQ,CAAC,GAAG,CAAC,EAAE;UACvByB,cAAc,GAAGC,mBAAW;QAC9B,CAAC,MAAM;UACLD,cAAc,GAAGxB,iBAAiB,CAACyB,mBAAW,EAAE/B,KAAK,CAAC;QACxD;QACA2B,MAAM,CAAC,YAAY,EAAEG,cAAc,CAAC;QACpCD,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;IACJ;EACF;AACF,CAAC;AAAA,IAAAG,QAAA,GAAAC,OAAA,CAAArB,OAAA,GAEcI,UAAU","ignoreList":[]}]}